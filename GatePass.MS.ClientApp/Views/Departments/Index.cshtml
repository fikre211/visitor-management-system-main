@model IEnumerable<GatePass.MS.Domain.Department>
@using Microsoft.AspNetCore.Mvc.Localization
@inject IViewLocalizer Localizer


@{

    ViewData["Title"] = "Index";
    var departments = Model.ToList();
    var hasDepartments = departments.Any();
}



    <div class="mb-3">
        <a asp-action="Create" class="btn btn-primary">
            <i class="fas fa-plus"></i> @Localizer["createNewDepartment"]
        </a>
    </div>



<div class="card">
    <div class="card-header bg-primary text-white">
        <h3 class="card-title">@Localizer["departmentLists"]</h3>
    </div>
    <div class="card-body p-0">
        <table class="table table-striped table-hover">
            <thead>
                <tr>
                    <th>@Localizer["departmentName"]</th>
                    <th class="text-right">@Localizer["actions"]</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var department in Model.Where(d => d.ParentDepartmentId == null))
                {
                    <tr data-widget="expandable-table" aria-expanded="true">
                        <td>
                            <i class="expandable-table-caret fas fa-caret-right fa-fw"></i>
                            @department.Name
                        </td>
                        <td class="text-right">
                             <a asp-action="Delete" asp-route-id="@department.Id" class="btn btn-danger btn-sm" title="Delete Department">
                                <i class="fas fa-trash"></i>
                            </a>
                            <a asp-action="Create" asp-route-parentId="@department.Id" class="btn btn-success btn-sm ml-2" title="Add Sub-department">
                                <i class="fas fa-plus"></i>
                            </a>
                            <a asp-action="Edit" asp-route-id="@department.Id" class="btn btn-warning btn-sm ml-2" title="Edit Department">
                                <i class="fas fa-edit"></i>
                            </a>
                           
                        </td>
                    </tr>
                    <tr class="expandable-body">
                        <td colspan="2">
                            <div class="p-0">
                                <table class="table table-hover">
                                    <tbody>
                                        @await Html.PartialAsync("_DepartmentPartial", department)
                                    </tbody>
                                </table>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
